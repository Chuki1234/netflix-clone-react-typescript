# ğŸ“Š Database Schema Visualization

## Collections Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MongoDB Database                         â”‚
â”‚                   "netflix-clone"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  users  â”‚      â”‚userpreferencesâ”‚    â”‚watchhistory â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 1. Collection: `users`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            users                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId                        â”‚
â”‚ name: String (required)              â”‚
â”‚ email: String (unique, required)     â”‚
â”‚ password: String (hashed, required)  â”‚
â”‚ avatar: String (optional)            â”‚
â”‚ createdAt: Date                      â”‚
â”‚ updatedAt: Date                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:1
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      userpreferences                 â”‚
â”‚  userId: ObjectId (ref: User)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. Collection: `userpreferences`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           userpreferences                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId                                      â”‚
â”‚ userId: ObjectId (ref: User, unique)              â”‚
â”‚                                                    â”‚
â”‚ myList: [                                          â”‚
â”‚   {                                                â”‚
â”‚     movieId: Number,                               â”‚
â”‚     mediaType: "movie" | "tv",                    â”‚
â”‚     addedAt: Date                                  â”‚
â”‚   }                                                â”‚
â”‚ ],                                                 â”‚
â”‚                                                    â”‚
â”‚ likedMovies: [                                     â”‚
â”‚   {                                                â”‚
â”‚     movieId: Number,                               â”‚
â”‚     mediaType: "movie" | "tv",                    â”‚
â”‚     likedAt: Date                                  â”‚
â”‚   }                                                â”‚
â”‚ ]                                                  â”‚
â”‚                                                    â”‚
â”‚ createdAt: Date                                    â”‚
â”‚ updatedAt: Date                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. Collection: `watchhistory`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            watchhistory                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId                                      â”‚
â”‚ userId: ObjectId (ref: User)                      â”‚
â”‚ movieId: Number                                    â”‚
â”‚ mediaType: "movie" | "tv"                         â”‚
â”‚ progress: Number (seconds watched)                â”‚
â”‚ duration: Number (total seconds)                  â”‚
â”‚ lastWatchedAt: Date                                â”‚
â”‚ completed: Boolean                                 â”‚
â”‚ createdAt: Date                                    â”‚
â”‚ updatedAt: Date                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Example Documents

### User Document
```json
{
  "_id": ObjectId("..."),
  "name": "John Doe",
  "email": "john@example.com",
  "password": "$2a$10$...",
  "avatar": "https://...",
  "createdAt": ISODate("2024-01-01T00:00:00Z"),
  "updatedAt": ISODate("2024-01-01T00:00:00Z")
}
```

### UserPreferences Document
```json
{
  "_id": ObjectId("..."),
  "userId": ObjectId("..."),
  "myList": [
    {
      "movieId": 550,
      "mediaType": "movie",
      "addedAt": ISODate("2024-01-15T10:00:00Z")
    }
  ],
  "likedMovies": [
    {
      "movieId": 550,
      "mediaType": "movie",
      "likedAt": ISODate("2024-01-15T10:05:00Z")
    }
  ],
  "createdAt": ISODate("2024-01-01T00:00:00Z"),
  "updatedAt": ISODate("2024-01-15T10:05:00Z")
}
```

### WatchHistory Document
```json
{
  "_id": ObjectId("..."),
  "userId": ObjectId("..."),
  "movieId": 550,
  "mediaType": "movie",
  "progress": 3600,
  "duration": 7200,
  "lastWatchedAt": ISODate("2024-01-15T10:30:00Z"),
  "completed": false,
  "createdAt": ISODate("2024-01-15T10:00:00Z"),
  "updatedAt": ISODate("2024-01-15T10:30:00Z")
}
```

## Indexes Summary

### users
- `email`: Unique index

### userpreferences
- `userId`: Unique index
- `myList.movieId`: Index
- `likedMovies.movieId`: Index

### watchhistory
- `userId, movieId, mediaType`: Compound unique index
- `userId, lastWatchedAt`: Compound index (for sorting)

